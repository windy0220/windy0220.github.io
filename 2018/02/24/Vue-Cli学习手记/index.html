<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Vue-Cli学习手记 · 大马的个人网站</title><meta name="description" content="Vue-Cli学习手记 - 大马"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://bigma.cc/atom.xml" title="大马的个人网站"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/avater.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">日志</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="/1000/01/01/实验室/" target="_self" class="nav-list-link">实验室</a></li><li class="nav-list-item"><a href="http://weibo.com/80yang" target="_blank" class="nav-list-link">微博</a></li><li class="nav-list-item"><a href="https://github.com/windy0220" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Vue-Cli学习手记</h1><div class="post-info">2018年2月24日</div><div class="post-content"><p>vueCli 学习笔记<br>github <a href="https://github.com/windy0220/vueStudy" target="_blank" rel="noopener">https://github.com/windy0220/vueStudy</a><br><a id="more"></a></p>
<h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><ul>
<li><a href="#安装VueCli">VueCli</a><ul>
<li><a href="#安装VueCli">安装</a></li>
<li><a href="#目录结构">目录结构</a></li>
<li><a href="#重要文件解读">重要文件解读</a></li>
</ul>
</li>
<li><a href="#vue-router">vue-router</a><ul>
<li><a href="#增加一个Hi的路由和页面">增加一个Hi的路由和页面</a></li>
<li><a href="#router-link制作导航">router-link制作导航</a></li>
<li><a href="#配置子路由">配置子路由</a></li>
<li><a href="#传参">传参</a></li>
<li><a href="#单页面多路由区域操作">单页面多路由区域操作</a></li>
<li><a href="#通过url传参">通过 url 传参</a></li>
<li><a href="#重定向">重定向</a></li>
<li><a href="#别名">别名</a></li>
<li><a href="#路由过渡动画">路由过渡动画</a></li>
<li><a href="#404">404页面</a></li>
<li><a href="#URL Mode">URL Mode</a></li>
<li><a href="#路由配置文件中的钩子">路由配置文件中的钩子</a></li>
<li><a href="#组件中的钩子函数">组件中的钩子函数</a></li>
<li><a href="#编程式导航">编程式导航</a></li>
</ul>
</li>
<li><a href="#vuex">Vuex</a><ul>
<li><a href="#安装vuex">安装vuex</a></li>
<li><a href="#简化state的调用">简化state的调用</a></li>
<li><a href="#getters过滤器">getters过滤器</a></li>
<li><a href="#actions异步修改状态">actions异步修改状态</a></li>
<li><a href="#module模块组">modue模块组</a></li>
</ul>
</li>
</ul>
<h1 id="安装VueCli"><a href="#安装VueCli" class="headerlink" title="安装VueCli"></a>安装VueCli</h1><p>安装cnpm<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure></p>
<p>安装 vue-cli<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm i vue-cli -g</span><br></pre></td></tr></table></figure></p>
<p>查看 vue-cli 版本<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue -V</span><br></pre></td></tr></table></figure></p>
<p>初始化项目<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue init webpack &lt;项目名称&gt;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>Project name :项目名称 ，如果不需要更改直接回车就可以了。注意：这里不能使用大写</li>
<li>Project description:项目描述</li>
<li>Author：作者</li>
<li>Install  vue-router? 是否安装vue的路由插件，我们这里需要安装，所以选择Y</li>
<li>Use ESLint to lint your code? 是否用ESLint来限制你的代码错误和风格。输入n，</li>
<li>setup unit tests with  Karma + Mocha? 是否需要安装单元测试工具Karma+Mocha，输入n。</li>
<li>Setup e2e tests with Nightwatch?是否安装e2e来进行用户行为模拟测试，输入n。</li>
</ul>
<p>进入项目执行 <code>cnpm i</code> 安装依赖包</p>
<p>运行 <code>npm run dev</code> 启动服务环境</p>
<p>运行 <code>npm run build</code> 打包文件 将 dist 文件夹下的内容上传到服务器即可。</p>
<blockquote>
<p>将 config/index.js 中的 build 下的 assetsPublicPath: ‘/‘ 修改为 assetsPublicPath: ‘./‘</p>
</blockquote>
<h1 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">|-- build                            // 项目构建(webpack)相关代码</span><br><span class="line">|   |-- build.js                     // 生产环境构建代码</span><br><span class="line">|   |-- check-version.js             // 检查node、npm等版本</span><br><span class="line">|   |-- dev-client.js                // 热重载相关</span><br><span class="line">|   |-- dev-server.js                // 构建本地服务器</span><br><span class="line">|   |-- utils.js                     // 构建工具相关</span><br><span class="line">|   |-- webpack.base.conf.js         // webpack基础配置 *</span><br><span class="line">|   |-- webpack.dev.conf.js          // webpack开发环境配置</span><br><span class="line">|   |-- webpack.prod.conf.js         // webpack生产环境配置</span><br><span class="line">|-- config                           // 项目开发环境配置</span><br><span class="line">|   |-- dev.env.js                   // 开发环境变量</span><br><span class="line">|   |-- index.js                     // 项目一些配置变量</span><br><span class="line">|   |-- prod.env.js                  // 生产环境变量</span><br><span class="line">|   |-- test.env.js                  // 测试环境变量</span><br><span class="line">|-- src                              // 源码目录</span><br><span class="line">|   |-- components                   // vue公共组件</span><br><span class="line">|   |-- store                        // vuex的状态管理</span><br><span class="line">|   |-- App.vue                      // 页面入口文件</span><br><span class="line">|   |-- main.js                      // 程序入口文件，加载各种公共组件</span><br><span class="line">|-- static                           // 静态文件，比如一些图片，json数据等</span><br><span class="line">|   |-- data                         // 群聊分析得到的数据用于数据可视化</span><br><span class="line">|-- .babelrc                         // ES6语法编译配置 *</span><br><span class="line">|-- .editorconfig                    // 定义代码格式 *</span><br><span class="line">|-- .gitignore                       // git上传需要忽略的文件格式</span><br><span class="line">|-- README.md                        // 项目说明</span><br><span class="line">|-- favicon.ico</span><br><span class="line">|-- index.html                       // 入口页面</span><br><span class="line">|-- package.json                     // 项目基本信息</span><br></pre></td></tr></table></figure>
<h2 id="重要文件解读"><a href="#重要文件解读" class="headerlink" title="重要文件解读"></a>重要文件解读</h2><h2 id="main-js文件解读"><a href="#main-js文件解读" class="headerlink" title="main.js文件解读"></a>main.js文件解读</h2><p>main.js是整个项目的入口文件,在src文件夹下：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span>   <span class="comment">//生产环境提示，这里设置成了false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* eslint-disable no-new */</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  router,</span><br><span class="line">  template: <span class="string">'&lt;App/&gt;'</span>,</span><br><span class="line">  components: &#123; App &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>通过代码可以看出这里引进了App的组件和<app>的模板，它是通过 import App from ‘./App’这句代码引入的。  我们找到App.vue文件，打开查看。</app></p>
<h2 id="App-vue文件解读"><a href="#App-vue文件解读" class="headerlink" title="App.vue文件解读"></a>App.vue文件解读</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;img src=&quot;./assets/logo.png&quot;&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;app&apos;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">#app &#123;</span><br><span class="line">  font-family: &apos;Avenir&apos;, Helvetica, Arial, sans-serif;</span><br><span class="line">  -webkit-font-smoothing: antialiased;</span><br><span class="line">  -moz-osx-font-smoothing: grayscale;</span><br><span class="line">  text-align: center;</span><br><span class="line">  color: #2c3e50;</span><br><span class="line">  margin-top: 60px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>app.vue文件我们可以分成三部分解读，</p>
<ul>
<li><p><template></template>标签包裹的内容：这是模板的HTMLDom结构，里边引入了一张图片和<router-view></router-view>标签，<router-view>标签说明使用了路由机制。我们会在以后专门拿出一篇文章讲Vue-router。</router-view></p>
</li>
<li><p><script></script>标签包括的js内容：你可以在这里些一些页面的动态效果和Vue的逻辑代码。</p>
</li>
<li><p><style></style>标签包裹的css内容：这里就是你平时写的CSS样式，对页面样子进行装饰用的，需要特别说明的是你可以用<style scoped></style>来声明这些css样式只在本模板中起作用。</p>
</li>
</ul>
<h2 id="router-index-js-路由文件"><a href="#router-index-js-路由文件" class="headerlink" title="router/index.js 路由文件"></a>router/index.js 路由文件</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="keyword">import</span> Hello <span class="keyword">from</span> <span class="string">'@/components/Hello'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Router)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/'</span>,</span><br><span class="line">      name: <span class="string">'Hello'</span>,</span><br><span class="line">      component: Hello</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>我们可以看到 import Hello from ‘@/components/Hello’这句话， 文件引入了/components/Hello.vue文件。这个文件里就配置了一个路由，就是当我们访问网站时给我们显示Hello.vue的内容。</p>
<h2 id="Hello-vue文件解读"><a href="#Hello-vue文件解读" class="headerlink" title="Hello.vue文件解读"></a>Hello.vue文件解读</h2><p>同样分为  <code>&lt;template&gt;&lt;script&gt;&lt;style&gt;</code>  三个部分，以后我们大部分的工作都是写这些.vue结尾的文件。现在我们可以试着改一些内容，然后预览一下。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;hello&quot;&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;Essential Links&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li&gt;&lt;a href=&quot;https://vuejs.org&quot; target=&quot;_blank&quot;&gt;Core Docs&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;&lt;a href=&quot;https://forum.vuejs.org&quot; target=&quot;_blank&quot;&gt;Forum&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;&lt;a href=&quot;https://gitter.im/vuejs/vue&quot; target=&quot;_blank&quot;&gt;Gitter Chat&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;&lt;a href=&quot;https://twitter.com/vuejs&quot; target=&quot;_blank&quot;&gt;Twitter&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">      &lt;br&gt;</span><br><span class="line">      &lt;li&gt;&lt;a href=&quot;http://vuejs-templates.github.io/webpack/&quot; target=&quot;_blank&quot;&gt;Docs for This Template&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;h2&gt;Ecosystem&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li&gt;&lt;a href=&quot;http://router.vuejs.org/&quot; target=&quot;_blank&quot;&gt;vue-router&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;&lt;a href=&quot;http://vuex.vuejs.org/&quot; target=&quot;_blank&quot;&gt;vuex&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;&lt;a href=&quot;http://vue-loader.vuejs.org/&quot; target=&quot;_blank&quot;&gt;vue-loader&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;&lt;a href=&quot;https://github.com/vuejs/awesome-vue&quot; target=&quot;_blank&quot;&gt;awesome-vue&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;hello&apos;,</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      msg: &apos;Welcome to Your Vue.js App&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- Add &quot;scoped&quot; attribute to limit CSS to this component only --&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">h1, h2 &#123;</span><br><span class="line">  font-weight: normal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ul &#123;</span><br><span class="line">  list-style-type: none;</span><br><span class="line">  padding: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">li &#123;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  margin: 0 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a &#123;</span><br><span class="line">  color: #42b983;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h1 id="vue-router"><a href="#vue-router" class="headerlink" title="vue-router"></a>vue-router</h1><p>安装 如果安装 vue-cli 的时候安装了 router 则不用再单独安装<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm i vue-router --save-dev</span><br></pre></td></tr></table></figure></p>
<h3 id="解读router-index-js文件"><a href="#解读router-index-js文件" class="headerlink" title="解读router/index.js文件"></a>解读router/index.js文件</h3><p>我们用vue-cli生产了我们的项目结构，你可以在src/router/index.js文件，这个文件就是路由的核心文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>   <span class="comment">//引入Vue</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">'vue-router'</span>  <span class="comment">//引入vue-router</span></span><br><span class="line"><span class="keyword">import</span> Hello <span class="keyword">from</span> <span class="string">'@/components/Hello'</span>  <span class="comment">//引入根目录下的Hello.vue组件</span></span><br><span class="line"></span><br><span class="line">Vue.use(Router)  <span class="comment">//Vue全局使用Router</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  routes: [              <span class="comment">//配置路由，这里是个数组</span></span><br><span class="line">    &#123;                    <span class="comment">//每一个链接都是一个对象</span></span><br><span class="line">      path: <span class="string">'/'</span>,         <span class="comment">//链接路径</span></span><br><span class="line">      name: <span class="string">'Hello'</span>,     <span class="comment">//路由名称，</span></span><br><span class="line">      component: Hello   <span class="comment">//对应的组件模板</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>这个路由文件里只配置了一个功能，就是在进入项目时，显示Hello.vue里边的内容代码</p>
<h3 id="增加一个Hi的路由和页面"><a href="#增加一个Hi的路由和页面" class="headerlink" title="增加一个Hi的路由和页面"></a>增加一个Hi的路由和页面</h3><ul>
<li>在src/components目录下，新建 Hi.vue 文件。</li>
<li>编写文件内容，和我们之前讲过的一样，文件要包括三个部分 <code>&lt;template&gt;&lt;script&gt;</code> 和 <code>&lt;style&gt;</code> 。文件很简单，只是打印一句话。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=<span class="string">"hello"</span>&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="built_in">export</span> default &#123;</span><br><span class="line">  name: <span class="string">'hi'</span>,</span><br><span class="line">  <span class="function"><span class="title">data</span></span> () &#123;</span><br><span class="line">    <span class="built_in">return</span> &#123;</span><br><span class="line">      msg: <span class="string">'Hi, I am JSPang'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>引入 Hi组件：我们在router/index.js文件的上边引入Hi组件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Hi <span class="keyword">from</span> <span class="string">'@/components/Hi'</span></span><br></pre></td></tr></table></figure>
<ul>
<li>增加路由配置：在router/index.js文件的routes[]数组中，新增加一个对象，代码如下。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  path:<span class="string">'/hi'</span>,</span><br><span class="line">  name:<span class="string">'Hi'</span>,</span><br><span class="line">  component:Hi</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>路由配置文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>   <span class="comment">//引入Vue</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">'vue-router'</span>  <span class="comment">//引入vue-router</span></span><br><span class="line"><span class="keyword">import</span> Hello <span class="keyword">from</span> <span class="string">'@/components/Hello'</span>  <span class="comment">//引入根目录下的Hello.vue组件</span></span><br><span class="line"><span class="keyword">import</span> Hi <span class="keyword">from</span> <span class="string">'@/components/Hi'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Router)  <span class="comment">//Vue全局使用Router</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  routes: [              <span class="comment">//配置路由，这里是个数组</span></span><br><span class="line">    &#123;                    <span class="comment">//每一个链接都是一个对象</span></span><br><span class="line">      path: <span class="string">'/'</span>,         <span class="comment">//链接路径</span></span><br><span class="line">      name: <span class="string">'Hello'</span>,     <span class="comment">//路由名称，</span></span><br><span class="line">      component: Hello   <span class="comment">//对应的组件模板</span></span><br><span class="line">    &#125;,&#123;</span><br><span class="line">      path:<span class="string">'/hi'</span>,</span><br><span class="line">      name:<span class="string">'Hi'</span>,</span><br><span class="line">      component:Hi</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="router-link制作导航"><a href="#router-link制作导航" class="headerlink" title="router-link制作导航"></a>router-link制作导航</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=<span class="string">"/"</span>&gt;[显示字段]&lt;<span class="regexp">/router-link&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>to：是我们的导航路径，要填写的是你在router/index.js文件里配置的path值，如果要导航到默认首页，只需要写成  to=”/”  ，</li>
<li>[显示字段] ：就是我们要显示给用户的导航名称，比如首页  新闻页。</li>
</ul>
<p>在 src/App.vue文件中的template里加入下面代码，实现导航。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;导航 ：</span><br><span class="line">   &lt;router-link to=<span class="string">"/"</span>&gt;首页&lt;<span class="regexp">/router-link&gt;</span></span><br><span class="line"><span class="regexp">   &lt;router-link to="/</span>hi<span class="string">"&gt;Hi页面&lt;/router-link&gt;</span></span><br><span class="line"><span class="string">&lt;/p&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="vue-router配置子路由"><a href="#vue-router配置子路由" class="headerlink" title="vue-router配置子路由"></a>vue-router配置子路由</h2><p>用 <code>&lt;router-link&gt;</code> 标签增加了两个新的导航链接。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;导航 ：</span><br><span class="line">      &lt;router-link to=<span class="string">"/"</span>&gt;首页&lt;<span class="regexp">/router-link&gt; |</span></span><br><span class="line"><span class="regexp">      &lt;router-link to="/</span>hi<span class="string">"&gt;Hi页面&lt;/router-link&gt; |</span></span><br><span class="line"><span class="string">      &lt;router-link to="</span>/hi/hi1<span class="string">"&gt;-Hi页面1&lt;/router-link&gt; |</span></span><br><span class="line"><span class="string">      &lt;router-link to="</span>/hi/hi2<span class="string">"&gt;-Hi页面2&lt;/router-link&gt;</span></span><br><span class="line"><span class="string">&lt;/p&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>把Hi.vue改成一个通用的模板，加入 <code>&lt;router-view&gt;</code> 标签，给子模板提供插入位置<br>“Hi页面1”   和 “Hi页面2”  都相当于“Hi页面”的子页面<br><strong> 坑 vue模板只能有一个根对象 需要用 div 包裹住 router-view </strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=<span class="string">"hello"</span>&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">    &lt;router-view class=<span class="string">"aaa"</span>&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="built_in">export</span> default &#123;</span><br><span class="line">  name: <span class="string">'hi'</span>,</span><br><span class="line">  <span class="function"><span class="title">data</span></span> () &#123;</span><br><span class="line">    <span class="built_in">return</span> &#123;</span><br><span class="line">      msg: <span class="string">'Hi, I am JSPang'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>在components目录下新建两个组件模板 Hi1.vue 和 Hi2.vue</p>
<p>新建的模板和Hi.vue没有太多的差别，知识改变了data中message的值，也就是输出的结果不太一样了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=<span class="string">"hello"</span>&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="built_in">export</span> default &#123;</span><br><span class="line">  name: <span class="string">'hi'</span>,</span><br><span class="line">  <span class="function"><span class="title">data</span></span> () &#123;</span><br><span class="line">    <span class="built_in">return</span> &#123;</span><br><span class="line">      msg: <span class="string">'Hi, I am Hi1!'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>修改router/index.js代码<br>改变我们的路由配置文件就可以了。子路由的写法是在原有的路由配置下加入children字段。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="keyword">import</span> Hello <span class="keyword">from</span> <span class="string">'@/components/Hello'</span></span><br><span class="line"><span class="keyword">import</span> Hi <span class="keyword">from</span> <span class="string">'@/components/Hi'</span></span><br><span class="line"><span class="keyword">import</span> Hi1 <span class="keyword">from</span> <span class="string">'@/components/Hi1'</span></span><br><span class="line"><span class="keyword">import</span> Hi2 <span class="keyword">from</span> <span class="string">'@/components/Hi2'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Router)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/'</span>,</span><br><span class="line">      name: <span class="string">'Hello'</span>,</span><br><span class="line">      component: Hello</span><br><span class="line">    &#125;,&#123;</span><br><span class="line">      path:<span class="string">'/hi'</span>,</span><br><span class="line">      component:Hi,</span><br><span class="line">      children:[</span><br><span class="line">        &#123;<span class="attr">path</span>:<span class="string">'/'</span>,<span class="attr">component</span>:Hi&#125;,</span><br><span class="line">        &#123;<span class="attr">path</span>:<span class="string">'hi1'</span>,<span class="attr">component</span>:Hi1&#125;,</span><br><span class="line">        &#123;<span class="attr">path</span>:<span class="string">'hi2'</span>,<span class="attr">component</span>:Hi2&#125;,</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>需要注意的是，在配置路由文件前，需要先用import引入Hi1和Hi2。<br>小坑注意，子路由 不用带 <code>/</code></p>
<h2 id="传参"><a href="#传参" class="headerlink" title="传参"></a>传参</h2><p>用name传递参数</p>
<ol>
<li><p>在路由文件src/router/index.js里配置name属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/'</span>,</span><br><span class="line">      name: <span class="string">'Hello'</span>,</span><br><span class="line">      component: Hello</span><br><span class="line">    &#125;</span><br><span class="line"> ]</span><br></pre></td></tr></table></figure>
</li>
<li><p>模板里(src/App.vue)用$router.name的形势接收，比如直接在模板中显示：<br>注意这里是 <code>route</code> 不是 <code>router</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;&#123;&#123; $route.name&#125;&#125;&lt;<span class="regexp">/p&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>通过<router-link> 标签中的to传参</router-link></p>
<blockquote>
<p>多数传参是不用name进行传参的，我们用 <code>&lt;router-link&gt;</code> 标签中的 <code>to</code> 属性进行传参，需要您注意的是这里的to要进行一个绑定，写成 <code>:to</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link :to=<span class="string">"&#123;name:xxx,params:&#123;key:value&#125;&#125;"</span>&gt;valueString&lt;<span class="regexp">/router-link&gt;</span></span><br></pre></td></tr></table></figure>
<p>这里的to前边是带冒号的，然后后边跟的是一个对象形势的字符串.</p>
<ul>
<li>name：就是我们在路由配置文件中起的name值。</li>
<li>params：就是我们要传的参数，它也是对象形势，在对象里可以传递多个值。</li>
</ul>
<p>修改 src/App.vue 里的 <code>&lt;router-link&gt;</code> 标签<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link :to=<span class="string">"&#123;name:'hi1',params:&#123;username:'windy'&#125;&#125;"</span>&gt;Hi页面<span class="number">1</span>&lt;<span class="regexp">/router-link&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>把src/reouter/index.js文件里给hi1配置的路由起个name,就叫hi1.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">path</span>:<span class="string">'/hi1'</span>,<span class="attr">name</span>:<span class="string">'hi1'</span>,<span class="attr">component</span>:Hi1&#125;,</span><br></pre></td></tr></table></figure></p>
<p>最后在模板里(src/components/Hi1.vue)用$route.params.username进行接收.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;$route.params.username&#125;&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="单页面多路由区域操作"><a href="#单页面多路由区域操作" class="headerlink" title="单页面多路由区域操作"></a>单页面多路由区域操作</h2><p>在一个页面上调用多个 <code>&lt;router-view&gt;&lt;/router-view&gt;</code> 并控制所显示的内容。使用 <code>name</code> 来区分。</p>
<p>src/App.vue<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-view&gt;<span class="xml"><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line">&lt;router-view name="left" class="leftbox"&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;router-view name="right" class="rightbox"&gt;&lt;/router-view&gt;</span><br></pre></td></tr></table></figure></p>
<p>新建所需的组件 left.vue right1.vue right2.vue 并在 router/index.js 中导入</p>
<p><code>components</code> 中定义各 <code>router-view</code> 的显示内容 <code>routerViewName:componentName</code></p>
<blockquote>
<p>坑 component  注意加</p>
</blockquote>
<p>src/router/index.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  routes: [&#123;</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    name: <span class="string">'HelloWorld'</span>,</span><br><span class="line">    components: &#123;</span><br><span class="line">      left:Left,</span><br><span class="line">      right:Right1</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/r1'</span>,</span><br><span class="line">    name: <span class="string">'HelloWorld'</span>,</span><br><span class="line">    components: &#123;</span><br><span class="line">      left:Left,</span><br><span class="line">      right:Right2</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="通过url传参"><a href="#通过url传参" class="headerlink" title="通过url传参"></a>通过url传参</h2><p>在 src/router/index.js 中的 path 上添加参数绑定 <code>path: &#39;/路径/:参数1/:参数2&#39;,</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    path: <span class="string">'/r1/:newsTit/:newsContent'</span>,</span><br><span class="line">    name: <span class="string">'r1'</span>,</span><br><span class="line">    components: &#123;</span><br><span class="line">      left:Left,</span><br><span class="line">      right:Right2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在 App.vue router-link 中加入要传递的参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/r1/新闻标题/新闻内容&quot;&gt;page1&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>
<p>在组件中 使用  接收</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;tit&quot;&gt;&#123;&#123; $route.params.newsTit &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;content&quot;&gt;&#123;&#123; $route.params.newsContent &#125;&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>使用正则来限制出入参数的形式。若参数不符则页面不会显示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path:&apos;/params/:newsId(\\d+)/:newsTitle&apos;,</span><br></pre></td></tr></table></figure>
<h2 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h2><p>src/router/index.js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    path: &apos;/redi&apos;,</span><br><span class="line">    redirect:&apos;/&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>带参数的重定向<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   path: &apos;/redip/:newsTit/:newsContent&apos;,</span><br><span class="line">   redirect:&apos;/r1/:newsTit/:newsContent&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h2><p><code>alias:&#39;path&#39;</code> 别名的路径可以显示到 url 上，但重定向只是显示重定向后的源地址</p>
<p>src/router/index.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    path: &apos;/r1/:newsTit/:newsContent&apos;,</span><br><span class="line">    name: &apos;r1&apos;,</span><br><span class="line">    alias:&apos;/aliaslink/:newsTit/:newsContent&apos;,</span><br><span class="line">    components: &#123;</span><br><span class="line">      left:Left,</span><br><span class="line">      right:Right2</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h2 id="路由过渡动画"><a href="#路由过渡动画" class="headerlink" title="路由过渡动画"></a>路由过渡动画</h2><p>给要添加动画的 router-view 包裹一个 transition 标签<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition name=&quot;ani&quot; mode=&quot;out-in&quot;&gt;</span><br><span class="line">        &lt;router-view name=&quot;right&quot; class=&quot;rightbox&quot;&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure></p>
<p>添加 css 样式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.ani-enter&#123;</span><br><span class="line">  opacity:0;</span><br><span class="line">&#125;</span><br><span class="line">.ani-leave&#123;</span><br><span class="line">  opacity: 1;</span><br><span class="line">&#125;</span><br><span class="line">.ani-enter-active&#123;</span><br><span class="line">  transition: opacity .5s;</span><br><span class="line">&#125;</span><br><span class="line">.ani-leave-active&#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">  transition:opacity .5s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>name: 过渡动画的css前缀<ul>
<li>ani-enter:进入过渡的开始状态，元素被插入时生效，只应用一帧后立刻删除。</li>
<li>ani-enter-active:进入过渡的结束状态，元素被插入时就生效，在过渡过程完成后移除。</li>
<li>ani-leave:离开过渡的开始状态，元素被删除时触发，只应用一帧后立刻删除。</li>
<li>ani-leave-active:离开过渡的结束状态，元素被删除时生效，离开过渡完成后被删除。</li>
</ul>
</li>
<li>mode: 过度模式<ul>
<li>in-out:新元素先进入过渡，完成之后当前元素过渡离开。</li>
<li>out-in:当前元素先进行过渡离开，离开完成后新元素过渡进入。</li>
</ul>
</li>
</ul>
<blockquote>
<p>别名或重定向的 view 切换无法触发动画，另外 transition 只能包含一个组 router-view</p>
</blockquote>
<h1 id="404"><a href="#404" class="headerlink" title="404"></a>404</h1><p>如果用户输入的路径在 router 中没有定义，展示该页面</p>
<p>在 src/componets 下新建 Error.vue 组件</p>
<p>在 src/router/index.js 中导入 routes 中定义</p>
<p>src/router/index.js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    path: &apos;*&apos;,</span><br><span class="line">    component: Error</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="URL-Mode"><a href="#URL-Mode" class="headerlink" title="URL Mode"></a>URL Mode</h1><p>在 src/router/index.js 中定义</p>
<ul>
<li>mode: ‘hash’ : url 中带 #</li>
<li>mode: ‘hhistory’ : url 中不带＃ 默认值</li>
</ul>
<p>src/router/index.js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export default new Router(&#123;</span><br><span class="line">  mode: &apos;history&apos;,</span><br><span class="line">  routes: [&#123;</span><br><span class="line">    ....</span><br></pre></td></tr></table></figure></p>
<h2 id="路由配置文件中的钩子"><a href="#路由配置文件中的钩子" class="headerlink" title="路由配置文件中的钩子"></a>路由配置文件中的钩子</h2><p>src/router/index.js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   path:&apos;/hook&apos;,</span><br><span class="line">   name:&apos;hook&apos;,</span><br><span class="line">   component:Hook,</span><br><span class="line">   beforeEnter:(to, from,  next)=&gt;&#123;</span><br><span class="line">     console.log(to)</span><br><span class="line">     console.log(from)</span><br><span class="line">     next()</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure></p>
<ul>
<li>to:路由将要跳转的路径信息，信息是包含在对像里边的。</li>
<li>from:路径跳转前的路径信息，也是一个对象的形式。</li>
<li>next:路由的控制参数，常用的有next(true)和next(false)。注意：不写 next() 将导致页面不加载</li>
</ul>
<h2 id="组件中的钩子函数"><a href="#组件中的钩子函数" class="headerlink" title="组件中的钩子函数"></a>组件中的钩子函数</h2><p>组件中可以使用两个钩子函数</p>
<ul>
<li>beforeRouteEnter：在路由进入前的钩子函数。</li>
<li>beforeRouteLeave：在路由离开前的钩子函数。</li>
</ul>
<p>src/components/Com_Hook.vue<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Com_Hook&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      msg: &quot;This is my vue Hook 请查看控制台&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeRouteEnter: (to, from, next) =&gt; &#123;</span><br><span class="line">    console.log(&quot;准备进入模板&quot;)</span><br><span class="line">    next()</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeRouteLeave: (to, from, next) =&gt; &#123;</span><br><span class="line">    console.log(&quot;准备离开模板&quot;)</span><br><span class="line">    next()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h2 id="编程式导航"><a href="#编程式导航" class="headerlink" title="编程式导航"></a>编程式导航</h2><ul>
<li>this.$router.go(-1) 后退</li>
<li>this.$router.go(1) 前进</li>
<li>this.$router.push(‘/‘) 跳转的相应的路径</li>
</ul>
<p>src/App.vue</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">        &lt;button @click=&quot;goBack&quot;&gt;后退&lt;/button&gt;</span><br><span class="line">        &lt;button @click=&quot;goNext&quot;&gt;前进&lt;/button&gt;</span><br><span class="line">        &lt;button @click=&quot;goHome&quot;&gt;首页&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;App&quot;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">    goBack()&#123;</span><br><span class="line">      this.$router.go(-1)</span><br><span class="line">    &#125;,</span><br><span class="line">    goNext()&#123;</span><br><span class="line">      this.$router.go(1)</span><br><span class="line">    &#125;,</span><br><span class="line">    goHome()&#123;</span><br><span class="line">      this.$router.push(&apos;/&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h1 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h1><h2 id="安装vuex"><a href="#安装vuex" class="headerlink" title="安装vuex"></a>安装vuex</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm i vuex --save</span><br></pre></td></tr></table></figure>
<p>–save 是因为vuex是要在生产环境调用的</p>
<p>在 src 下新建数据仓库 src/vuex/store.js</p>
<p>src/vuex/store.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入 vue 和 vuex</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">"vue"</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">"vuex"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用 vuex</span></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="comment">//state</span></span><br><span class="line"><span class="keyword">const</span> state=&#123;</span><br><span class="line">    count: <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//mutations</span></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">    add(state)&#123;</span><br><span class="line">        state.count ++</span><br><span class="line">    &#125;,</span><br><span class="line">    cut(state)&#123;</span><br><span class="line">        state.count --</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//导出 state 和 mutations</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state,mutations</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>在 组件中使用<br>src/component/count.vue<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123; $store.state.count &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"$store.commit('add')"</span>&gt;</span>加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"$store.commit('cut')"</span>&gt;</span>减<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'@/vuex/store'</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">        data() &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                msg: <span class="string">'Hello Vuex'</span></span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        store</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>使用需先导入  <code>import store from &#39;@/vuex/store&#39;</code></p>
<p>并写入到 export default 中</p>
<p>调用</p>
<ul>
<li>数据 <code>$store.state.count</code></li>
<li>方法 <code>$store.commit(&#39;add&#39;)</code> 注意括号中要加引号</li>
</ul>
<h2 id="简化state的调用"><a href="#简化state的调用" class="headerlink" title="简化state的调用"></a>简化state的调用</h2><p>src/component/count</p>
<ol>
<li>方法一<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">    count() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.count;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>computed属性可以在输出前，对data中的值进行改变，我们就利用这种特性把store.js中的state值赋值给我们模板中的data值。</p>
<ol start="2">
<li><p>方法二</p>
<blockquote>
<p>注意这里 要带{ }</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;mapState&#125; <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line">computed:mapState(&#123;</span><br><span class="line">        count:<span class="function"><span class="params">state</span>=&gt;</span>state.count</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>方法三 这种方法最简单</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;mapState&#125; <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line">computed:mapState([<span class="string">"count"</span>])</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>使用以上三种方法就可以在 template 中直接调用  了</p>
<h2 id="mutations-修改状态"><a href="#mutations-修改状态" class="headerlink" title="mutations 修改状态"></a>mutations 修改状态</h2><ol>
<li>传参</li>
</ol>
<p>store.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mutations=&#123;</span><br><span class="line">    add(state,n)&#123;</span><br><span class="line">        state.count+=n;</span><br><span class="line">    &#125;,</span><br><span class="line">    reduce(state)&#123;</span><br><span class="line">        state.count--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>count.vue<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=<span class="string">"$store.commit('add',10)"</span>&gt;+<span class="xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p>
<ol start="2">
<li>简化调用方式</li>
</ol>
<p>count.vue<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import &#123; mapState,mapMutations &#125; from 'vuex';</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"reduce"</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"add(10)"</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"> methods:mapMutations([</span></span><br><span class="line"><span class="javascript">        <span class="string">'add'</span>,<span class="string">'reduce'</span></span></span><br><span class="line"><span class="undefined">]),</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="getters过滤器"><a href="#getters过滤器" class="headerlink" title="getters过滤器"></a>getters过滤器</h2><p>src/vuex/store.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">    count:<span class="function">(<span class="params">state</span>)=&gt;</span> state.count +=<span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state,mutations,getters</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>src/component/count.vue<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">    ...mapState([<span class="string">"count"</span>]),</span><br><span class="line">    ...mapGetters([<span class="string">'count'</span>])</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>…为 es6 的扩展运算符</p>
</blockquote>
<h2 id="actions异步修改状态"><a href="#actions异步修改状态" class="headerlink" title="actions异步修改状态"></a>actions异步修改状态</h2><p>actions和之前讲的Mutations功能基本一样，不同点是，actions是异步的改变state状态，而Mutations是同步改变状态。</p>
<p>在store.js中声明actions<br>actions是可以调用Mutations里的方法的，我们还是继续在上节课的代码基础上进行学习，在actions里调用add和reduce两个方法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> actions =&#123;</span><br><span class="line">    addAction(context)&#123;</span><br><span class="line">        context.commit(<span class="string">'add'</span>,<span class="number">10</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    reduceAction(&#123;commit&#125;)&#123;</span><br><span class="line">        commit(<span class="string">'reduce'</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>在actions里写了两个方法addAction和reduceAction，在方法体里，我们都用commit调用了Mutations里边的方法。细心的小伙伴会发现这两个方法传递的参数也不一样。</p>
<p>context：上下文对象，这里你可以理解称store本身。<br>{commit}：直接把commit对象传递过来，可以让方法体逻辑和代码更清晰明了。<br>模板中的使用<br>我们需要在count.vue模板中编写代码，让actions生效。我们先复制两个以前有的按钮，并改成我们的actions里的方法名，分别是：addAction和reduceAction。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"addAction"</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"cutAction"</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>改造一下我们的methods方法，首先还是用扩展运算符把mapMutations和mapActions加入。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">    ...mapMutations([</span><br><span class="line">        <span class="string">'add'</span>,<span class="string">'cut'</span></span><br><span class="line">    ]),</span><br><span class="line">    ...mapActions([<span class="string">'addAction'</span>,<span class="string">'cutAction'</span>])</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>你还要记得用import把我们的mapActions引入才可以使用。</p>
<p>增加异步检验<br>我们现在看的效果和我们用Mutations作的一模一样，肯定有的小伙伴会好奇，那actions有什么用，我们为了演示actions的异步功能，我们增加一个计时器（setTimeOut）延迟执行。在addAction里使用setTimeOut进行延迟执行。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setTimeOut(<span class="function"><span class="params">()</span>=&gt;</span>&#123;context.commit(cut)&#125;,<span class="number">3000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'我比reduce提前执行'</span>);</span><br></pre></td></tr></table></figure>
<p>我们可以看到在控制台先打印出了‘我比reduce提前执行’这句话。</p>
<h2 id="modue模块组"><a href="#modue模块组" class="headerlink" title="modue模块组"></a>modue模块组</h2><p>声明模块组：<br>在vuex/store.js中声明模块组，我们还是用我们的const常量的方法声明模块组。代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> moduleA=&#123;</span><br><span class="line">    state,mutations,getters,actions</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>声明好后，我们需要修改原来 Vuex.Stroe里的值：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    modules:&#123;<span class="attr">a</span>:moduleA&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>在模板中使用<br>现在我们要在模板中使用count状态，要用插值的形式写入。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;$store.state.a.count&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果想用简单的方法引入，还是要在我们的计算属性中rutrun我们的状态。写法如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computed:&#123;</span><br><span class="line">    count()&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.a.count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</div></article></div></main><footer><div class="paginator"><a href="/2018/03/10/使用命令行上传文件/" class="prev">PREV</a><a href="/2017/10/18/Laravel学习手记/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'ma-chen-cn';
var disqus_identifier = '2018/02/24/Vue-Cli学习手记/';
var disqus_title = 'Vue-Cli学习手记';
var disqus_url = 'http://bigma.cc/2018/02/24/Vue-Cli学习手记/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//ma-chen-cn.disqus.com/count.js" async></script><div class="copyright"><p>© 2015 - 2023 <a href="http://bigma.cc">大马</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>. <a href="https://beian.miit.gov.cn/" target="_blank">冀ICP备13002956号-1</a></p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-116335564-1",'auto');ga('send','pageview');</script></body></html>